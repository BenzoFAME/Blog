<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Сообщения</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        body {
            background: #fafafa;
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
        }

        .chat-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid #ddd;
            transition: 0.2s;
        }
        .chat-card:hover {
            background: #f0f0f0;
        }
        .avatar-small {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
        }
    </style>
</head>

<body>

<nav class="navbar navbar-light px-4 py-2" style="background:#fff;border-bottom:1px solid #ddd;">
    <a href="/" class="btn btn-outline-secondary btn-sm">⬅ На главную</a>
</nav>

<div class="container mt-4" style="max-width: 700px;">

    <h2 class="mb-4">Мои диалоги</h2>

    <div th:if="${chats.size() == 0}">
        <p class="text-muted">Нет активных диалогов</p>
    </div>

    <div th:each="user : ${chats}" class="chat-card mb-3 d-flex align-items-center">
        <img th:if="${user.avatar != null}" th:src="@{'/profile/avatar/' + ${user.id}}" class="avatar-small me-3">
        <div class="me-3" th:if="${user.avatar == null}">
            <div style="width:55px;height:55px;border-radius:50%;background:#ddd;"></div>
        </div>

        <div class="flex-grow-1">
            <div class="fw-bold" th:text="${user.username}"></div>
        </div>

        <a th:href="@{'/messages/' + ${user.id}}" class="btn btn-primary btn-sm">Открыть</a>
    </div>

</div>

</body>
</html>

